{% extends 'base.html' %}
{% load static %}

{% block content %}

<div id='drf_latesthome' data-url='{% url 'dashboard-detail' 1 %}'></div>
<div id='drf_dashboard_data' data-url='{% url 'dashboard-list' %}'></div>
<div id='drf_homelisting' data-url='{% url 'dashboard-list' %}'></div>

{% comment %} Section Dropdown {% endcomment %}
<div class='d-flex flex-row'>


    {% comment %} Dropdown City {% endcomment %}
    <div class="form-group m-2">

        <select class="form-control" name="" id="">
            <option value="all">All city</option>
            {% for city in cities %}
            <option value="{{city.city}}">{{city.city|title}}</option>{% endfor %}
        </select>
    </div>


    {% comment %} Dropdown type of property {% endcomment %}
    <div class="form-group m-2">

        <select class="form-control" name="" id="">
            <option value="all">All Property types</option>
            {% for type in property_types %}
            <option>{{type.type_of_property}}</option>{% endfor %}
        </select>
    </div>



    {% comment %} Dropdown year of construction {% endcomment %}
    <div class="form-group m-2">

        <select class="form-control" name="" id="">
            <option value="all">All years</option>
            {% for year in years %}
            <option>{{year.year_of_construction}}</option>{% endfor %}
        </select>
    </div>


</div>



{% comment %} Section Dashboard {% endcomment %}
    <div class='d-flex flex-row column-containers flex-wrap mw-60'>

        <div class="container flex-grow-1 mw-50 first-column sticky-top bg-light p-2">
            <div id='mydashboard'>
            </div>
        </div>

        <div class="container second-column">

            <div id='homelisting' :key="componentKey">
                <template v-for="(item,index) in homelist" >
                    <div class="card m-4">
                        <div class="card-body">

                            <div :id="'carousel'+index" class="carousel slide bg-dark h-50 mh-50" data-ride="carousel">
                                <div class="carousel-inner" role="listbox">
                                    <template v-for="(screenshot,sindex) in item.screenshots">

                                        <div v-if="sindex==0" class="carousel-item active">
                                            <img class="d-block gallery-fixed" :src="screenshot" alt="First slide">
                                        </div>
                                        <div v-else class="carousel-item">
                                            <img class="d-block gallery-fixed " :src="screenshot" alt="index">
                                        </div>
                                    </template>

                                </div>

                                <a class="carousel-control-prev" :href="'#carousel'+index" role="button"
                                    data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" :href="'#carousel'+index" role="button"
                                    data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>

                            <hr />

                            <h4 class="card-title">[[item.property_name]]</h4>
                            <p :id="'description'+index" class="card-text collapse" aria-expanded="false">
                                [[item.description_from_tenant]]</p>
                            <div class='expandbuttondiv'>
                                <a role="button" class="collapsed" data-toggle="collapse" :href="'#description'+index"
                                    aria-expanded="false" aria-controls="collapseExample"></a>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>

    </div>











{% endblock content %}


{% block scripts %}
<style>
    .second-column .gallery-fixed {
        max-height: 400px;
        margin-left: auto;
        margin-right: auto;
    }
    #mydashboard{
        align-content: center;
    }
    .card .expandbuttondiv a.collapsed:after {
        content: '+ Show More';
    }

    .card .expandbuttondiv a:not(.collapsed):after {
        content: '- Show Less';
    }

    .card .column-containers .collapse:not(.show) {
        display: block;

            {
            % comment %
        }

        height=lineheight * no of lines to display;

            {
            % endcomment %
        }

        height: 2em;
        overflow: hidden;
    }

    .card .column-containers .collapsing {
        height: 2em;
    }

    .column-containers .second-column {
        overflow-y: scroll;
        height: 100vh
    }

    .first-column {
        top: 50px;
    }

    .column-containers {
        top: 50px;
        position: sticky;
        max-height:30vh;
    }
</style>


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="{% static 'js/dashboard_data.js' %}"></script>


{% endblock scripts %}